# 高機能Discord自動通知 & 自動配信Self-Bot

特定のDiscordサーバーのアクティビティやSNSの更新を監視し、指定されたチャンネルに自動で通知を送信する、通知Botです。
OBS Studioと連携し、特定のユーザーのボイスチャンネル入退室をトリガーに、**YouTube配信を自動で開始・停止**、さらには**配信シーン内のソース表示を制御**する機能を持ちます。

## 警告

このプログラムはDiscordの利用規約に明確に違反する**Self-Bot**です。

*   **あなたのアカウントが永久に凍結（BAN）されるリスクが非常に高いです。**
*   **このプログラムを使用したことによるいかなる損害についても、作者は一切の責任を負いません。**
*   **必ず自己責任で、実験的な目的でのみ使用してください。**

## 主な機能

1.  **Discordイベント通知**: サーバーで新しいイベントが作成された際に通知します。
2.  **Twitter更新通知**: **Nitter**のウェブサイトを10分ごとにスクレイピングし、特定ユーザーの新規ツイート（リプライ、リツイートを除く）を検知して通知します。外部RSSサービスに依存しないため、より安定しています。
3.  **ボイスチャンネル入室通知**: 特定ユーザーが指定のボイスチャンネルに入室した際に通知します。
    *   **再接続対応**: 通知後、3分以内の再入室は無視し、不要な通知の重複を防ぎます。
4.  **OBS連携による自動配信**:
    *   ターゲットユーザーのVC入室を検知すると、OBSの配信を自動で開始します。
    *   配信の種類（ステージ/作業配信）に応じて、OBS上の特定のソースの表示/非表示を自動で切り替えます。
    *   **遅延停止機能**: ユーザーがVCから退出しても即座に配信を停止せず、**3分間の猶予期間**を設けます。3分以内にユーザーが戻ってきた場合は配信を続行し、戻ってこなかった場合のみ配信を停止します。
    *   **長時間配信対策**: 配信開始から**11時間30分**が経過すると、自動的に配信を停止し、YouTubeの12時間制限による配信切れを防ぎます。

## 必要なもの

*   [Node.js](https://nodejs.org/ja) (v16.9.0 以上)
*   [OBS Studio](https://obsproject.com/ja)
*   あなたのDiscordアカウントのトークン
*   OBSのWebSocketサーバーパスワード

---

## セットアップ手順

### 1. OBSとWebSocketの準備

1.  **OBS Studioをインストール**し、配信したいシーンやソース（カメラ、画面キャプチャなど）を事前に設定しておきます。
2.  OBSのメニューから「ツール」 > 「WebSocketサーバー設定」を開きます。
3.  「**WebSocketサーバーを有効にする**」にチェックを入れます。
4.  「**認証を有効にする**」にチェックが入っていることを確認します。
5.  「サーバーパスワード」の「表示」ボタンを押し、表示された**パスワードをコピー**しておきます。

### 2. プロジェクトの準備

1.  コマンドプロンプト（PowerShell）を開き、プロジェクト用フォルダを作成して移動します。
    ```powershell
    mkdir C:\Notifier_Bot
    cd C:\Notifier_Bot
    ```
2.  Node.jsプロジェクトを初期化し、必要なライブラリをすべてインストールします。
    ```powershell
    npm init -y
    npm install discord.js-selfbot-v13 dotenv axios cheerio obs-websocket-js
    ```

### 3. 設定ファイルの作成

1.  プロジェクトフォルダ内に `config.json` ファイルを作成し、あなたの環境に合わせて内容を編集します。**特に`obsSettings`の`sceneName`と`sourceName`は、OBS上の名前と完全に一致させる必要があります。**
    *(→ このリポジトリにある`config.json`のテンプレートを使用)*

2.  プロジェクトフォルダ内に `.env` ファイルを作成し、あなたの秘密情報を記述します。
    ```ini
    DISCORD_TOKEN="のDiscordアカウントトークンを貼り付け"
    OBS_PASSWORD="OBSで設定したWebSocketパスワードを貼り付け"
    ```
    **注意:** `.env`ファイルは絶対に公開しないでください。

### 4. プログラムの配置

プロジェクトフォルダに `index.js` という名前のファイルを作成し、このリポジトリにある `index.js` のコードをコピー＆ペーストします。

---

## 実行方法

1.  **【重要】必ずOBS Studioを先に起動しておきます。**
2.  以下のいずれかの方法でBotを起動します。

    *   **コマンドプロンプトから直接実行:**
        ```powershell
        node index.js
        ```

    *   **ショートカットの作成:**
            ```cmd
            cmd.exe /k "cd /d C:\Notifier_Bot && node index.js"
            ```
